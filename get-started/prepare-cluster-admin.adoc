---
sidebar: sidebar 
permalink: get-started/prepare-cluster-admin.html 
keywords: afx, afx system, prepare, administration 
summary: AFX を運用環境に展開する前に、管理構造と構成オプションを理解しておくことが重要です。これにより、AFX クラスターの安全で効率的かつ効果的な管理が保証されます。 
---
= AFXストレージシステムの管理を準備する
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
AFX を運用環境に展開する前に、管理構造と構成オプションを理解しておくことが重要です。これにより、AFX クラスターの安全で効率的かつ効果的な管理が保証されます。



== ストレージ仮想マシンを理解する

ストレージ仮想マシン (SVM) は、 ONTAPクラスタ内の分離されたサーバーまたはテナント環境です。接続されたクライアントにデータを提供するように SVM を設定できます。  AFX SVM の機能と特性を理解しておく必要があります。


NOTE: AFX クラスターをセットアップして最初にデプロイすると、1 つのデータ SVM が作成されます。必要に応じて追加のデータ SVM を作成できます。

行政管理:: データ SVM を使用すると、データとアプリケーションの分離を確立し、強制することができます。これは、大規模な組織に多くの異なるグループがある場合に役立ちます。管理制御を SVM に委任して、データ アクセス、セキュリティ、保護に関連するポリシーを確立できます。
アカウントとRBACロール:: AFX には、クラスター レベルと SVM レベルの 2 つの認証および承認レベルがあります。クラスター アカウントに加えて、各 SVM には独自のユーザーとロールのセットが存在します。ほとんどの場合、クラスター レベルのアカウントを使用すれば十分です。ただし、環境によっては、より制限の厳しい SVM アカウントとロールも構成して使用する必要がある場合もあります。見るlink:../administer/additional-ontap-svm.html["追加のAFX SVM管理"]詳細についてはこちらをご覧ください。
SVMスコープのリソース:: AFX リソースと構成可能なエンティティは、クラスターまたは特定の SVM に関連付けられます。  SVM スコープを持つリソースは多数あり、ボリュームやバケットだけでなく、SVM ユーザー アカウントや RBAC ロールも含まれます。
専用ネットワークインターフェース:: 各 SVM には専用のネットワーク インターフェイス セットがあります。たとえば、管理用とクライアント データ アクセス用の別々の LIF が SVM に割り当てられます。




== 2つのAFX管理レベル

AFX を使用して実行するONTAP管理タスクは、通常、2 つの異なるカテゴリに分類されます。一部のタスクはONTAPクラスタ全体に適用されますが、他のタスクは特定の SVM に適用されます。これにより、2 層の管理モデルが実現します。

これらのレベルは、管理タスクがどのように編成され、割り当てられるかを説明するものであり、必ずしも関連するセキュリティがどのように構成されるかを説明するものではないことに注意することが重要です。たとえば、クラスタ レベルの管理を実行するにはクラスタ管理者アカウントが必要ですが、SVM 管理にも使用できます。

クラスタ管理者:: クラスター管理者は、すべてのデータ SVM を含む AFX クラスターを完全に制御できます。 AFX クラスター管理レベルには、クラスター管理者が実行できるタスクのみが含まれ、SVM 固有の管理タスクは含まれません。見るlink:../administer/view-dashboard.html["クラスターを管理する"]詳細についてはこちらをご覧ください。
SVM管理者:: SVM 管理者ロールは特定のデータ SVM を制御するため、クラスタ管理者に比べて制限が厳しくなります。 SVM 管理には、ボリュームの作成など、SVM スコープを持つオブジェクトおよびリソースを使用したタスクの実行が含まれます。見るlink:../manage-data/prepare-manage-data.html["ストレージVMとデータの管理"]詳細についてはこちらをご覧ください。




== 3つの管理インターフェース

AFFおよびFASシステムと同様に、AFX には 3 つの管理インターフェイスがあります。使用する必要がある LIF (または IP アドレス) は、管理インターフェイスと環境によって異なります。


NOTE: ほとんどの管理タスクでは、System Manager ユーザー インターフェイスが推奨されます。特に指示がない限り、管理者アカウントを使用する必要があります。

[cols="25,75"]
|===
| インターフェイス | 説明 


| System Manager | これは、Web ブラウザを通じて利用できるグラフィカル ユーザー インターフェイスです。使いやすく、顧客が必要とするほとんどの機能にアクセスできます。  System Manager を介して AFX にアクセスすると、 ONTAPクラスタおよび SVM 管理のニーズの大部分を最も簡単に満たすことができます。 


| コマンドライン インターフェイス | ONTAP CLI には SSH を使用してアクセスできます。アカウントに応じて、クラスタ管理 LIF または SVM 管理 LIF にアクセスできます。 CLI は使いにくいですが、より堅牢です。高度な管理タスクではこれが推奨され、場合によっては必須となります。 


| REST API | AFX には、AFX クラスターの管理を自動化するために使用できる REST API が含まれています。  API は、Unified ONTAPパーソナリティ REST API で使用できる呼び出しの多くを共有しますが、独自の AFX 機能をサポートするために変更されています。 
|===


== システム マネージャーで情報を検索、フィルタリング、並べ替える方法を学びます

System Manager ユーザー インターフェイスには、必要な情報にアクセスして表示できるようにする強力な機能セットが含まれています。これらの機能の使い方を習得すると、AFX ストレージ システムをより適切に管理できるようになります。見る https://docs.netapp.com/us-en/ontap/task_admin_search_filter_sort.html["システムマネージャで情報を検索、フィルタリング、並べ替える"^]詳細についてはこちらをご覧ください。



== ONTAP CLIにアクセスする

ほとんどの AFX 管理には System Manager を使用できますが、 ONTAPコマンドライン インターフェイスを使用してのみ実行できるタスクもいくつかあります。

.タスク概要
セキュア シェル (SSH) を介してONTAP CLI にアクセスできます。 CLI には、使用できるコマンドとコマンド パラメータを決定する複数の権限レベルがあります。その `admin`レベルは最も権限が小さく、サインイン時のデフォルトです。セッションの権限を昇格することができます。 `advanced`必要に応じて `set`指示。

.開始する前に
次のものが必要になります:

* クラスタまたはSVM管理LIFのIPアドレスまたはドメイン名
* アカウントの資格情報
* ローカルワークステーション上のSSHクライアント


.手順
. SSH を使用して AFX クラスターに接続します。例:
+
`ssh admin@10.69.117.24`

. アカウントのパスワードを入力してください。
. 階層の最上位にあるコマンド ディレクトリを表示します。
+
`?`

. セッションの権限レベルを `admin`に `advanced`:
+
`set -privilege advanced`





== ONTAP HAペアの操作

Unified ONTAPと同様に、AFX クラスタ ノードは、フォールト トレランスと無停止運用を実現するために高可用性 (HA) ペアで構成されます。 HA ペアリングにより、ストレージ フェイルオーバーなどのノード障害が発生した場合でも、ストレージ操作をオンラインのまま維持できるようになります。各ノードは別のノードと提携して 1 つのペアを形成します。これは通常、2 つのノードのNVRAMモジュール間の直接接続を使用して行われます。

AFX では、バックエンド クラスター スイッチに新しい HA VLAN が追加され、 NVRAMモジュールが HA パートナー ノード間で接続された状態を維持できるようになります。  HA ペアは AFX システムでも引き続き使用されますが、パートナー ノードを直接接続する必要はなくなりました。



== AFXシステムの展開制限

クラスターを構成および使用するときに、AFX によって適用される最小値や最大値などのいくつかの制限があります。これらの制限は、次のようないくつかの異なるカテゴリに分類されます。

クラスターあたりのコントローラーノード:: 各 AFX クラスターには少なくとも 4 つのノードが必要です。ノードの最大数は、 ONTAPリリースによって異なります。
ストレージ容量:: これは、クラスターのストレージ可用性ゾーン (SAZ) 内のすべての SSD ディスクの合計容量です。最大ストレージ容量は、 ONTAPリリースによって異なります。クラスターの機能を判断するには、相互運用性マトリックス ツール (IMT) で入手可能な情報を確認する必要があります。




== AFXシステムの健全性を確認する

AFX 管理タスクを実行する前に、クラスターの正常性を確認する必要があります。


TIP: 運用上またはパフォーマンス上の問題が疑われる場合など、いつでも AFX クラスターの健全性を確認できます。

.開始する前に
次のものが必要になります:

* クラスタ管理IPアドレスまたはFQDN
* クラスターの管理者アカウント（ユーザー名とパスワード）


.手順
. ブラウザを使用して System Manager に接続します。
+
`\https://$FQDN_IPADDR/`

+
*例*

+
`\https://10.61.25.33/`

. 管理者のユーザー名とパスワードを入力し、「*Sign in*」を選択します。
. ケーブル接続を含むシステムダッシュボードとクラスターのステータスを確認します。左側の_ナビゲーション ペイン_にも注目してください。
+
link:../administer/view-dashboard.html["ダッシュボードとクラスターのステータスを表示する"]

. システム イベントと監査ログ メッセージを表示します。
+
link:../administer/view-events-log.html["AFX イベントと監査ログを表示する"]

. *Insight* の推奨事項を表示してメモします。
+
link:../administer/view-insights.html["Insightsを使用してAFXクラスターのパフォーマンスとセキュリティを最適化します"]





== データ SVM の作成と使用のクイック スタート

AFX クラスターをインストールしてセットアップしたら、ほとんどの AFX 展開に典型的な管理タスクの実行を開始できます。クライアントとデータを共有し始めるために必要な大まかな手順は次のとおりです。

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png["1"]利用可能なデータSVMを表示する
[role="quick-margin-para"]
link:../administer/display-svms.html["表示"]データ SVM のリストを確認し、使用できるものがあるかどうかを判断します。

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png["2"]オプションでデータSVMを作成する
[role="quick-margin-para"]
link:../administer/create-svm.html["作成"]既存の SVM が利用できない場合は、SVM を使用してアプリケーションのワークロードとデータを分離して保護します。

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-3.png["三つ"]SVMを構成する
[role="quick-margin-para"]
link:../administer/configure-svm.html["設定"]SVM を作成し、クライアント アクセスの準備をします。

.image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-4.png["4"]ストレージのプロビジョニングの準備
[role="quick-margin-para"]
link:../manage-data/prepare-manage-data.html["準備"]データの割り当てと管理を行います。



== 関連情報

* https://docs.netapp.com/us-en/ontap/concepts/introducing-ontap-interfaces-concept.html["ONTAPのユーザ インターフェイス"^]
* https://docs.netapp.com/us-en/ontap/system-admin/set-privilege-level-task.html["ONTAP CLIで権限レベルを設定する"^]
* https://docs.netapp.com/us-en/ontap/system-admin/index.html["ONTAP CLI を使用したクラスタ管理について学習します"^]
* link:../faq-ontap-afx.html["AFX ストレージ システムに関する FAQ"]

